<%- include('partials/header') %>
<div class="container">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h1>Clientes</h1>
            <a href="/clientes/novo" class="btn btn-success btn-sm">Novo Cliente</a>
        </div>
        <div class="card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>CPF</th>
                        <th>Endereço</th>
                        <th>Idade</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <% clientes.forEach((cliente) => { %>
                        <tr>
                            <td><%= cliente.nome %></td>
                            <td><%= cliente.cpf %></td>
                            <td><%= cliente.endereco %></td>
                            <td><%= cliente.idade %></td>
                            <td>
                                <button 
                                    class="btn btn-warning btn-sm visualizar-btn"
                                    data-nome="<%= cliente.nome %>"
                                    data-cpf="<%= cliente.cpf %>"
                                    data-endereco="<%= cliente.endereco %>"
                                    data-idade="<%= cliente.idade %>"
                                >Visualizar</button>
                                <a href="/clientes/<%= cliente.id %>/editar" class="btn btn-primary btn-sm">Editar</a>
                                <form action="/clientes/<%= cliente.id %>/deletar" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Deseja realmente deletar?')">Deletar</button>
                                </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modal de Visualização -->
<div class="modal fade" id="visualizarClienteModal" tabindex="-1" aria-labelledby="visualizarClienteLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="visualizarClienteLabel">Detalhes do Cliente</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <p><strong>Nome:</strong> <span id="modalNome"></span></p>
        <p><strong>CPF:</strong> <span id="modalCpf"></span></p>
        <p><strong>Endereço:</strong> <span id="modalEndereco"></span></p>
        <p><strong>Idade:</strong> <span id="modalIdade"></span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.querySelectorAll('.visualizar-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.getElementById('modalNome').textContent = this.dataset.nome;
      document.getElementById('modalCpf').textContent = this.dataset.cpf;
      document.getElementById('modalEndereco').textContent = this.dataset.endereco;
      document.getElementById('modalIdade').textContent = this.dataset.idade;
      var modal = new bootstrap.Modal(document.getElementById('visualizarClienteModal'));
      modal.show();
    });
  });
</script>
<%- include('partials/footer') %>
<!-- <%- include('partials/header') %>
<div class="container">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h1>Clientes</h1>
            <a href="/clientes/novo" class="btn btn-success btn-sm">Novo Cliente</a>
        </div>
        <div class="card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>CPF</th>
                        <th>Endereço</th>
                        <th>Idade</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <% clientes.forEach((cliente) => { %>
                        <tr>
                            <td><%= cliente.nome %></td>
                            <td><%= cliente.cpf %></td>
                            <td><%= cliente.endereco %></td>
                            <td><%= cliente.idade %></td>
                            <td>
                                <a href="/clientes/<%= cliente.id %>/editar" class="btn btn-primary btn-sm">Editar</a>
                                <form action="/clientes/<%= cliente.id %>/deletar" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Deseja realmente deletar?')">Deletar</button>
                                </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</div>
<%- include('partials/footer') %> -->